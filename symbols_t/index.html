<!DOCTYPE html>
<meta charset="utf-8">
<style> /* set the CSS */
    
.node circle {
  fill: #fff;
  stroke: steelblue;
  stroke-width: 3px;
}

.node text { font: 12px sans-serif; }

.node--internal text {
  text-shadow: 0 1px 0 #fff, 0 -1px 0 #fff, 1px 0 0 #fff, -1px 0 0 #fff;
}

.link {
  fill: none;
  stroke: #ccc;
  stroke-width: 2px;
}

</style>

<body>


<!-- load the d3.js library -->    	
<script src="https://d3js.org/d3.v5.min.js"></script>

<svg id="usedefs" width="500" height="100">
    <defs>
      <g id="crosshair">
        <circle cx="0" cy="0" r="2" fill="none"/>
        <line x1="-3" y1="0" x2="-1" y2="0"/>
        <line x1="1" y1="0" x2="3" y2="0"/>
        <line x1="0" y1="-1" x2="0" y2="-3"/>
        <line x1="0" y1="1" x2="0" y2="3"/>
      </g>
    </defs>
  </svg>

<script>
  //create symbol -method 1
 

  window.addEventListener( "click", makeCrosshair );
  function makeCrosshair() {
    var data = [[180,1], [260,3], [340,2], [420,4]];

    d3.select("#usedefs").selectAll("use")
      .data(data).enter().append("use")
      .attr("href", "#crosshair")
      .attr("transform", d => 
        `translate(${d[0]},50) scale(${2*d[1]})`)
        // "translate("+d[0]+", 50) scale("+2*d[1]+")")
      .attr("stroke", "black")
      .attr("stroke-width", d =>0.5/Math.sqrt(d[1]));
  }


//   window.addEventListener( "load", makeCrosshair );
//     function makeCrosshair() {
//         var data = [ [180, 1], [260, 3], [340, 2], [420, 4] ];        //<1>

//         d3.select( "#usedefs" )
//             .selectAll( "use" ).data( data ).enter().append( "use" )  //<2>
//             .attr( "href", "#crosshair" )                             //<3>
//             .attr( "transform",                                       //<4>
//                   d=>"translate("+d[0]+",50) scale("+2*d[1]+")" )
//             .attr( "stroke", "black" )                                //<5>
//             .attr( "stroke-width", d=>0.5/Math.sqrt(d[1]) );          //<6>
// }
        
</script>
</body>